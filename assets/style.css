*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{
  --bg:#0f0f1a;--surface:#1a1a2e;--card:#222240;--card-hover:#2a2a50;
  --text:#e8e8f0;--muted:#7a7a9e;--accent:#6c63ff;--accent-dim:rgba(108,99,255,0.15);
  --green:#00E676;--blue:#00b0ff;--orange:#ffab40;--red:#ff5252;--pink:#e040fb;
  --radius:16px;--radius-sm:10px;
  --nav-h:68px;--topbar-h:56px;--safe-bottom:env(safe-area-inset-bottom,0px);
  --safe-top:env(safe-area-inset-top,0px);
}
html,body{
  height:100%;background:var(--bg);color:var(--text);
  font-family:'SF Pro Display','Segoe UI',system-ui,-apple-system,sans-serif;
  overflow:hidden;
}
#app{height:100%;position:relative}
.screen{display:none;height:100%}
.screen.active{display:flex;flex-direction:column}

/* Login */
.login-container{
  flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:32px 24px;gap:16px;
}
.login-logo{font-size:4rem;filter:drop-shadow(0 0 20px rgba(108,99,255,0.4))}
.login-container h1{font-size:2rem;font-weight:700;letter-spacing:-0.5px}
.login-sub{color:var(--muted);font-size:0.95rem}
#login-form{width:100%;max-width:320px;display:flex;flex-direction:column;gap:12px;margin-top:24px}
.input{
  background:var(--surface);border:1px solid rgba(255,255,255,0.08);border-radius:var(--radius-sm);
  padding:14px 16px;font-size:1rem;color:var(--text);outline:none;width:100%;
  transition:border-color .2s;
}
.input:focus{border-color:var(--accent)}
.btn{
  border:none;border-radius:var(--radius-sm);padding:14px 24px;font-size:1rem;font-weight:600;
  cursor:pointer;transition:all .2s;min-height:48px;
}
.btn-primary{background:var(--accent);color:#fff}
.btn-primary:active{background:#5a52e0;transform:scale(0.98)}
.btn-full{width:100%}
.error-text{color:var(--red);font-size:0.85rem;min-height:1.2em}

/* Topbar */
.topbar{
  height:var(--topbar-h);padding-top:var(--safe-top);
  display:flex;align-items:center;justify-content:space-between;
  padding-left:16px;padding-right:8px;
  background:var(--surface);border-bottom:1px solid rgba(255,255,255,0.06);
  flex-shrink:0;z-index:10;
}
.topbar-left{display:flex;align-items:center;gap:10px}
.topbar-status{font-size:10px;color:var(--green);transition:color .3s}
.topbar-status.disconnected{color:var(--red)}
.topbar-status.connecting{color:var(--orange);animation:pulse 1.5s infinite}
.topbar-title{font-size:1.1rem;font-weight:600}
.icon-btn{
  width:44px;height:44px;display:flex;align-items:center;justify-content:center;
  background:none;border:none;color:var(--muted);font-size:1.4rem;cursor:pointer;
  border-radius:50%;transition:background .2s;
}
.icon-btn:active{background:rgba(255,255,255,0.08)}

/* Content */
.content{flex:1;overflow:hidden;position:relative}
.view{display:none;flex-direction:column;height:100%;overflow:hidden}
.view.active{display:flex}
.view-header{padding:16px 16px 8px;flex-shrink:0}
.view-header h2{font-size:1.3rem;font-weight:700}

/* Agent Selector */
.agent-selector{
  display:flex;gap:8px;padding:10px 16px;overflow-x:auto;flex-shrink:0;
  scrollbar-width:none;-webkit-overflow-scrolling:touch;
}
.agent-selector::-webkit-scrollbar{display:none}
.agent-chip{
  flex-shrink:0;padding:8px 16px;border-radius:20px;font-size:0.85rem;font-weight:500;
  background:var(--card);color:var(--muted);border:1px solid rgba(255,255,255,0.06);
  cursor:pointer;transition:all .2s;white-space:nowrap;min-height:36px;
}
.agent-chip.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.agent-chip:active{transform:scale(0.95)}

/* Chat Thread */
.chat-thread{
  flex:1;overflow-y:auto;padding:12px 16px 8px;
  -webkit-overflow-scrolling:touch;scroll-behavior:smooth;
}
.chat-empty{color:var(--muted);text-align:center;padding:60px 20px;font-size:0.95rem}
.chat-msg{
  max-width:85%;margin-bottom:10px;padding:10px 14px;border-radius:var(--radius);
  font-size:0.92rem;line-height:1.5;word-break:break-word;
  animation:msgIn .2s ease;
}
@keyframes msgIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
.chat-msg.user{
  margin-left:auto;background:var(--accent);color:#fff;
  border-bottom-right-radius:4px;
}
.chat-msg.assistant{
  margin-right:auto;background:var(--card);color:var(--text);
  border-bottom-left-radius:4px;
}
.chat-msg.system{
  margin:8px auto;background:transparent;color:var(--muted);
  font-size:0.82rem;text-align:center;max-width:90%;
}
.chat-msg .msg-meta{font-size:0.72rem;color:rgba(255,255,255,0.4);margin-top:4px}
.chat-msg.assistant .msg-meta{color:var(--muted)}
.chat-msg pre{
  background:rgba(0,0,0,0.3);border-radius:8px;padding:8px 10px;
  overflow-x:auto;font-size:0.82rem;margin:6px 0;
}
.chat-msg code{font-family:'SF Mono',Menlo,monospace;font-size:0.85em}
.chat-msg p{margin:4px 0}
.typing-indicator{color:var(--muted);font-size:0.85rem;padding:8px 14px;display:flex;align-items:center;gap:4px}
.typing-dots{display:flex;gap:4px;align-items:center}
.typing-dots span{width:6px;height:6px;border-radius:50%;background:var(--muted);animation:bounce 1.4s infinite ease-in-out both}
.typing-dots span:nth-child(1){animation-delay:-0.32s}
.typing-dots span:nth-child(2){animation-delay:-0.16s}
@keyframes bounce{0%,80%,100%{transform:scale(0)}40%{transform:scale(1)}}

/* Chat Input */
.chat-input-area{
  flex-shrink:0;padding:8px 12px;padding-bottom:calc(8px + var(--safe-bottom));
  background:var(--surface);border-top:1px solid rgba(255,255,255,0.06);
}
.chat-input-row{display:flex;align-items:flex-end;gap:8px}
.chat-textarea{
  flex:1;background:var(--card);border:1px solid rgba(255,255,255,0.08);
  border-radius:22px;padding:10px 16px;font-size:0.95rem;color:var(--text);
  resize:none;outline:none;max-height:120px;line-height:1.4;
  font-family:inherit;transition:border-color .2s;
}
.chat-textarea:focus{border-color:var(--accent)}
.btn-send{
  width:44px;height:44px;border-radius:50%;border:none;
  background:var(--accent);color:#fff;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  transition:all .2s;flex-shrink:0;
}
.btn-send:disabled{opacity:0.3;cursor:default}
.btn-send:not(:disabled):active{transform:scale(0.9);background:#5a52e0}

/* Bottom Nav */
.bottom-nav{
  display:flex;height:var(--nav-h);padding-bottom:var(--safe-bottom);
  background:var(--surface);border-top:1px solid rgba(255,255,255,0.06);
  flex-shrink:0;z-index:10;
}
.nav-item{
  flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:3px;background:none;border:none;color:var(--muted);cursor:pointer;
  font-size:0.68rem;font-weight:500;transition:color .2s;padding:4px;
  min-height:44px;
}
.nav-item.active{color:var(--accent)}
.nav-item:active{opacity:0.7}
.nav-item svg{width:22px;height:22px}

/* Lists */
.list-container{flex:1;overflow-y:auto;padding:8px 16px 16px;-webkit-overflow-scrolling:touch}
.list-empty{color:var(--muted);text-align:center;padding:40px 20px;font-size:0.9rem}
.list-card{
  background:var(--card);border-radius:var(--radius-sm);padding:14px 16px;
  margin-bottom:10px;border:1px solid rgba(255,255,255,0.05);
  transition:background .2s;cursor:pointer;
}
.list-card:active{background:var(--card-hover)}
.list-card-title{font-weight:600;font-size:0.95rem;margin-bottom:4px}
.list-card-sub{color:var(--muted);font-size:0.82rem;line-height:1.4}
.list-card-meta{display:flex;gap:12px;margin-top:8px;flex-wrap:wrap}
.list-card-tag{
  font-size:0.72rem;padding:3px 8px;border-radius:10px;
  background:var(--accent-dim);color:var(--accent);
}
.list-card-tag.green{background:rgba(0,230,118,0.12);color:var(--green)}
.list-card-tag.orange{background:rgba(255,171,64,0.12);color:var(--orange)}
.list-card-tag.red{background:rgba(255,82,82,0.12);color:var(--red)}
.list-card-tag.blue{background:rgba(0,176,255,0.12);color:var(--blue)}
.list-card-tag.pink{background:rgba(224,64,251,0.12);color:var(--pink)}

/* Status */
.status-container{flex:1;overflow-y:auto;padding:8px 16px 16px;-webkit-overflow-scrolling:touch}
.status-card{
  background:var(--card);border-radius:var(--radius-sm);padding:16px;
  margin-bottom:12px;border:1px solid rgba(255,255,255,0.05);
}
.status-card h3{font-size:0.95rem;font-weight:600;margin-bottom:10px;color:var(--accent)}
.status-row{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid rgba(255,255,255,0.04)}
.status-row:last-child{border-bottom:none}
.status-label{color:var(--muted);font-size:0.85rem}
.status-value{font-size:0.85rem;font-weight:500;text-align:right}

/* Session detail overlay */
.overlay{
  position:fixed;top:0;left:0;right:0;bottom:0;z-index:50;
  background:var(--bg);display:none;flex-direction:column;
}
.overlay.active{display:flex}
.overlay-header{
  display:flex;align-items:center;gap:12px;padding:12px 16px;
  padding-top:calc(12px + var(--safe-top));
  background:var(--surface);border-bottom:1px solid rgba(255,255,255,0.06);
  flex-shrink:0;
}
.overlay-back{
  width:44px;height:44px;display:flex;align-items:center;justify-content:center;
  background:none;border:none;color:var(--text);font-size:1.4rem;cursor:pointer;
  border-radius:50%;
}
.overlay-back:active{background:rgba(255,255,255,0.08)}
.overlay-title{font-size:1.1rem;font-weight:600;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.overlay-content{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch}

@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}

/* Markdown basic styling in chat */
.chat-msg ul,.chat-msg ol{padding-left:20px;margin:4px 0}
.chat-msg li{margin:2px 0}
.chat-msg blockquote{border-left:3px solid var(--accent);padding-left:10px;margin:6px 0;color:var(--muted)}
.chat-msg a{color:var(--blue);text-decoration:none}
.chat-msg strong{font-weight:600}
.chat-msg em{font-style:italic}

/* Scrollbar */
::-webkit-scrollbar{width:4px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.1);border-radius:2px}

/* Loading spinner */
.loading-spinner{
  width:24px;height:24px;border:3px solid var(--card);border-top-color:var(--accent);
  border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 8px;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* Active card highlight */
.list-card.active-card{border-color:var(--accent);background:var(--accent-dim)}

/* Agent avatar in list */
.list-card-header{display:flex;align-items:center;gap:12px;margin-bottom:8px}
.agent-avatar{
  width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:1.1rem;color:#fff;flex-shrink:0;
}
.list-card-header-text{flex:1;min-width:0}
.list-card-header-text .list-card-title{margin-bottom:2px}

/* Cron job items */
.cron-job{padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.04)}
.cron-job:last-child{border-bottom:none}
.cron-job-name{font-weight:500;font-size:0.88rem;margin-bottom:2px}
.cron-job-detail{color:var(--muted);font-size:0.78rem}

/* Log viewer */
.log-line{font-family:'SF Mono',Menlo,monospace;font-size:0.75rem;padding:2px 0;color:var(--muted);word-break:break-all}
.log-error{color:var(--red)}
.log-warn{color:var(--orange)}

/* Connection label */
.conn-label{font-size:0.7rem;margin-left:2px}
.conn-label.connected{color:var(--green)}
.conn-label.connecting{color:var(--orange)}
.conn-label.disconnected{color:var(--red)}

/* Streaming cursor */
.streaming-msg::after{content:'â–Š';animation:blink 1s step-end infinite;color:var(--accent)}
@keyframes blink{50%{opacity:0}}
